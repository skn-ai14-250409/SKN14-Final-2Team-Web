{% extends "scentpick/base.html" %}
{% block title %}ë§ˆì´í˜ì´ì§€ - ScentPick{% endblock %}
{% block content %}

<h2 style="margin-bottom:30px;color:#2d3748;">ë§ˆì´í˜ì´ì§€</h2>

<div class="mypage-container">
  <!-- ì¢Œì¸¡: í”„ë¡œí•„ -->
  <div class="profile-section">
    <div class="profile-avatar" style="width:120px;height:120px;border-radius:50%;overflow:hidden;border:1px solid #e2e8f0;margin-bottom:12px;display:flex;align-items:center;justify-content:center;background:#f9fafb;">
      <img src="{{ request.user.detail.avatar_url }}" alt="avatar" style="width:100%;height:100%;object-fit:cover;">
    </div>
    <div class="profile-name">{{ request.user.detail.name|default:request.user.username }}ë‹˜</div>
    <ul class="profile-menu">
      <li><a href="{% url 'scentpick:profile_edit' %}">íšŒì›ì •ë³´ ìˆ˜ì •</a></li>
      <li><a href="{% url 'scentpick:password_change' %}">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</a></li>
      <li><a class="danger" href="{% url 'uauth:logout' %}">ë¡œê·¸ì•„ì›ƒ</a></li>
    </ul>
  </div>

  <!-- ê°€ìš´ë°: ì¶”ì²œ ë‚´ì—­ -->
  <div class="recommendations-section">
    <h3 style="margin-bottom:20px;">ì¶”ì²œ ë°›ì€ í–¥ìˆ˜ ë‚´ì—­</h3>

    <div class="recommendations-grid">
      <div class="recommendation-card">
        <div class="recommendation-date">2024.08.25</div>
        <div class="perfume-img" style="margin:0 auto 10px;"></div>
        <div style="font-weight:600;margin-bottom:5px;">ìƒ¤ë„¬ ë¸”ë£¨</div>
        <div style="font-size:12px;color:#718096;margin-bottom:10px;">AI ì±—ë´‡ ì¶”ì²œ</div>
        <div style="display:flex;justify-content:center;gap:10px;">
          <button style="background:#e53e3e;color:#fff;border:none;padding:5px 10px;border-radius:15px;font-size:12px;">ğŸ‘</button>
          <button style="background:#f7fafc;border:1px solid #e2e8f0;padding:5px 10px;border-radius:15px;font-size:12px;">ğŸ‘</button>
        </div>
      </div>

      <div class="recommendation-card">
        <div class="recommendation-date">2024.08.23</div>
        <div class="perfume-img" style="margin:0 auto 10px;"></div>
        <div style="font-weight:600;margin-bottom:5px;">ë””ì˜¬ ì†Œë°”ì¥¬</div>
        <div style="font-size:12px;color:#718096;margin-bottom:10px;">ë‚ ì”¨ ê¸°ë°˜ ì¶”ì²œ</div>
        <div style="display:flex;justify-content:center;gap:10px;">
          <button style="background:#f7fafc;border:1px solid #e2e8f0;padding:5px 10px;border-radius:15px;font-size:12px;">ğŸ‘</button>
          <button style="background:#e53e3e;color:#fff;border:none;padding:5px 10px;border-radius:15px;font-size:12px;">ğŸ‘</button>
        </div>
      </div>

      <div class="recommendation-card">
        <div class="recommendation-date">2024.08.20</div>
        <div class="perfume-img" style="margin:0 auto 10px;"></div>
        <div style="font-weight:600;margin-bottom:5px;">í†°í¬ë“œ ì˜´ë¯€</div>
        <div style="font-size:12px;color:#718096;margin-bottom:10px;">AI ì±—ë´‡ ì¶”ì²œ</div>
        <div style="display:flex;justify-content:center;gap:10px;">
          <button style="background:#e53e3e;color:#fff;border:none;padding:5px 10px;border-radius:15px;font-size:12px;">ğŸ‘</button>
          <button style="background:#f7fafc;border:1px solid #e2e8f0;padding:5px 10px;border-radius:15px;font-size:12px;">ğŸ‘</button>
        </div>
      </div>

      <div class="recommendation-card">
        <div class="recommendation-date">2024.08.18</div>
        <div class="perfume-img" style="margin:0 auto 10px;"></div>
        <div style="font-weight:600;margin-bottom:5px;">ì¡° ë§ë¡  ìš°ë“œ ì„¸ì´ì§€</div>
        <div style="font-size:12px;color:#718096;margin-bottom:10px;">ì‚¬ìš©ì ë§ì¶¤ ì¶”ì²œ</div>
        <div style="display:flex;justify-content:center;gap:10px;">
          <button style="background:#e53e3e;color:#fff;border:none;padding:5px 10px;border-radius:15px;font-size:12px;">ğŸ‘</button>
          <button style="background:#f7fafc;border:1px solid #e2e8f0;padding:5px 10px;border-radius:15px;font-size:12px;">ğŸ‘</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ìš°ì¸¡: ì¦ê²¨ì°¾ê¸° -->
  <div class="favorites-section">
    <h3 style="margin-bottom:15px;">ì¦ê²¨ì°¾ê¸°</h3>
    <div class="favorites-grid">
      <div class="favorite-item"></div>
      <div class="favorite-item"></div>
      <div class="favorite-item"></div>
      <div class="favorite-item"></div>
      <div class="favorite-item"></div>
      <div class="favorite-item"></div>
    </div>
  </div>
</div>

{% endblock content %}

{% block script %}
<script>
  (() => {
    const cards = document.querySelectorAll(".recommendations-grid .recommendation-card");
    if (!cards.length) return;

    cards.forEach(card => {
      const likeBtn = card.querySelector("button:nth-of-type(1)");
      const hateBtn = card.querySelector("button:nth-of-type(2)");
      if (!likeBtn || !hateBtn) return;

      likeBtn.addEventListener("click", () => {
        likeBtn.classList.toggle("active");
        if (likeBtn.classList.contains("active")) hateBtn.classList.remove("active");
        // TODO: fetch('/api/feedback', { method:'POST', body: JSON.stringify({action:'like', perfume_id: ...}) })
      });

      hateBtn.addEventListener("click", () => {
        hateBtn.classList.toggle("active");
        if (hateBtn.classList.contains("active")) likeBtn.classList.remove("active");
        // TODO: fetch('/api/feedback', { method:'POST', body: JSON.stringify({action:'dislike', perfume_id: ...}) })
      });
    });
  })();
</script>
{% endblock script %}
