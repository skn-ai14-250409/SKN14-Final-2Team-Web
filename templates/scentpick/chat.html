{% extends "scentpick/base.html" %}
{% block title %}ScentPick Chat{% endblock %}
{% block content %}
<div class="chat-container">
  <div class="chat-sidebar">
    <button class="new-chat-btn">ìƒˆ ì±„íŒ…</button>
    <ul class="chat-history">
      <li>30ëŒ€ ë‚¨ì í–¥ìˆ˜ ì¶”ì²œ</li><li>ì½”íŠ¼ í–¥ì˜ í–¥ìˆ˜</li><li>ì—¬ë¦„ìš© ì‹œíŠ¸ëŸ¬ìŠ¤ í–¥ìˆ˜</li>
      <li>ë°ì´íŠ¸ìš© í–¥ìˆ˜ ì¶”ì²œ</li><li>ì‚¬ë¬´ì‹¤ìš© ì€ì€í•œ í–¥ìˆ˜</li>
    </ul>
  </div>

  <div class="chat-main">
    <div class="chat-header">
      <h3 style="margin-bottom:10px;">ScentPick AI ì±—ë´‡</h3>
      <div class="chat-examples">ğŸ’¡ ì˜ˆì‹œ: "30ëŒ€ ë‚¨ìê°€ ìì£¼ ì°¾ëŠ” í–¥ìˆ˜ ì•Œë ¤ì¤˜", "ì½”íŠ¼ í–¥ì˜ 20ë§Œì› ì´í•˜ í–¥ìˆ˜"</div>
    </div>
    <div class="chat-messages" id="chatMessages">
      <div class="message"><div class="message-content">ì•ˆë…•í•˜ì„¸ìš”! ScentPick AIì…ë‹ˆë‹¤. ì–´ë–¤ í–¥ìˆ˜ë¥¼ ì°¾ê³  ê³„ì‹ ê°€ìš”?</div></div>
    </div>
    <div class="chat-input">
      <input type="text" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." id="chatInput">
      <button class="send-btn" id="chatSendBtn">ì „ì†¡</button>
    </div>
  </div>

  <div class="chat-info">
    <div class="weather-info">
      <h4>ì˜¤ëŠ˜ì˜ ë‚ ì”¨</h4><p>ğŸŒ¤ï¸ ë§‘ìŒ, 22Â°C</p>
      <p style="font-size:14px;color:#718096;">ìƒì¾Œí•œ ì‹œíŠ¸ëŸ¬ìŠ¤ ê³„ì—´ì„ ì¶”ì²œí•´ìš”!</p>
    </div>
    <div class="user-info">
      <h4>ì‚¬ìš©ì ì •ë³´</h4><p>ğŸ‘¤ 20ëŒ€ ë‚¨ì„±</p>
      <p style="font-size:14px;color:#718096;">ì Šê³  í™œë™ì ì¸ í–¥ìˆ˜ë¥¼ ì¶”ì²œ!</p>
    </div>
    <div>
      <h4>ì¶”ì²œ í–¥ìˆ˜</h4>
      <div class="recommended-perfumes">
        <div class="perfume-card">
          <div class="perfume-img"></div><div style="font-size:12px;font-weight:600;">ìƒ¤ë„¬ ë¸”ë£¨</div>
          <a class="more-btn" href="{% url 'scentpick:product_detail' slug='bleu-de-chanel' %}">ë”ë³´ê¸°</a>
        </div>
        <div class="perfume-card">
          <div class="perfume-img"></div><div style="font-size:12px;font-weight:600;">ë””ì˜¬ ì†Œë°”ì¥¬</div>
          <a class="more-btn" href="{% url 'scentpick:product_detail' slug='dior-sauvage' %}">ë”ë³´ê¸°</a>
        </div>
        <div class="perfume-card">
          <div class="perfume-img"></div><div style="font-size:12px;font-weight:600;">í†°í¬ë“œ ì˜´ë¯€</div>
          <a class="more-btn" href="{% url 'scentpick:product_detail' slug='tomford-homme' %}">ë”ë³´ê¸°</a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock content %}

{% block scripts %}
<script>
  window.SC_HIDE_BUBBLE_ON_CHAT = true;

  (() => {
    const sendBtn = document.getElementById("chatSendBtn");
    const input   = document.getElementById("chatInput");
    const box     = document.getElementById("chatMessages");
    if (!sendBtn || !input || !box) return; // ë‹¤ë¥¸ í˜ì´ì§€ì—ì„œ ì•ˆì „ ì¢…ë£Œ

    function add(msg, isUser) {
      const div = document.createElement("div");
      div.className = "message" + (isUser ? " user" : "");
      div.innerHTML = '<div class="message-content">' + msg + "</div>";
      box.appendChild(div);
      box.scrollTop = box.scrollHeight;
    }
    function send() {
      const txt = (input.value || "").trim();
      if (!txt) return;
      input.value = "";
      add(txt, true);
      setTimeout(() => {
        add("ë„¤, 30ëŒ€ ë‚¨ì„±ë¶„ì—ê²Œ ì¸ê¸° ìˆëŠ” í–¥ìˆ˜ë¥¼ ì¶”ì²œí•´ë“œë¦´ê²Œìš”! ìƒ¤ë„¬ ë¸”ë£¨ ë“œ ìƒ¤ë„¬, ë””ì˜¬ ì†Œë°”ì¥¬, í†°í¬ë“œ ì˜´ë¯€ ë“±ì´ ì¸ê¸°ê°€ ë†’ìŠµë‹ˆë‹¤. ì–´ë–¤ ìŠ¤íƒ€ì¼ì˜ í–¥ì„ ì„ í˜¸í•˜ì‹œë‚˜ìš”?", false);
      }, 600);
    }

    sendBtn.addEventListener("click", send);
    input.addEventListener("keypress", (e) => { if (e.key === "Enter") send(); });
  })();
</script>
{% endblock %}